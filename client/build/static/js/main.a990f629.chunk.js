(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{10:function(e,c,t){e.exports={cell:"Cell_cell__gTdPA",piece:"Cell_piece__dk1Hx",pieceContainer:"Cell_pieceContainer__3zyC3",notValidMove:"Cell_notValidMove__zf5S6",validMove:"Cell_validMove__2RTPT"}},38:function(e,c,t){e.exports={board:"Board_board__1Y7VT"}},75:function(e,c,t){"use strict";t.r(c);var n=t(2),i=t(36),o=t.n(i),a=t(8),l=t(37),j=t.n(l),r=t(0);function s(e,c){return{pos:{i:e,j:c},piece:null}}function u(e){for(var c={n:e,cells:[]},t=0;t<e;t++)for(var n=0;n<e;n++)c.cells.push(s(t,n));return function(e){var c=e;return b(c,"R","black",0,0),b(c,"N","black",0,1),b(c,"B","black",0,2),b(c,"Q","black",0,3),b(c,"K","black",0,4),b(c,"B","black",0,5),b(c,"N","black",0,6),b(c,"R","black",0,7),b(c,"P","black",1,0),b(c,"P","black",1,1),b(c,"P","black",1,2),b(c,"P","black",1,3),b(c,"P","black",1,4),b(c,"P","black",1,5),b(c,"P","black",1,6),b(c,"P","black",1,7),b(c,"R","white",7,0),b(c,"N","white",7,1),b(c,"B","white",7,2),b(c,"Q","white",7,3),b(c,"K","white",7,4),b(c,"B","white",7,5),b(c,"N","white",7,6),b(c,"R","white",7,7),b(c,"P","white",6,0),b(c,"P","white",6,1),b(c,"P","white",6,2),b(c,"P","white",6,3),b(c,"P","white",6,4),b(c,"P","white",6,5),b(c,"P","white",6,6),b(c,"P","white",6,7),c}(c)}function b(e,c,t,n,i){e.cells[i+n*e.n].piece={color:t,type:c}}function p(e,c){return c.i>=0&&c.i<e.n&&c.j>=0&&c.j<e.n}function O(e,c,t){return t.filter((function(t){var n=t.j+t.i*e.n;return p(e,t)&&(null===e.cells[n].piece||e.cells[n].piece.color!==c)}))}function h(e,c,t){for(var n=[],i=1,o={i:t.i+c.i,j:t.j+c.j};p(e,o)&&null===e.cells[o.j+o.i*e.n].piece;)n.push(o),i++,o={i:t.i+c.i*i,j:t.j+c.j*i};return n.push(o),n}function v(e,c){var t=c.pos,n=c.piece,i=[];switch(n.type){case"P":i=function(e,c,t){var n=c.i,i=c.j,o="black"===t?1:-1,a="black"===t?1:6,l=[],j={i:n+o,j:i},r={i:n+2*o,j:i};return[{i:n+o,j:i-1},{i:n+o,j:i+1}].forEach((function(c){p(e,c)&&e.cells[c.j+c.i*e.n].piece&&e.cells[c.j+c.i*e.n].piece.color!==t&&l.push(c)})),p(e,j)&&null===e.cells[j.j+j.i*e.n].piece&&(l.push(j),n===a&&p(e,r)&&null===e.cells[r.j+r.i*e.n].piece&&l.push(r)),O(e,t,l)}(e,t,n.color);break;case"N":i=function(e,c,t){var n=c.i,i=c.j;return O(e,t,[{i:n+2,j:i-1},{i:n+2,j:i+1},{i:n-2,j:i-1},{i:n-2,j:i+1},{i:n+1,j:i-2},{i:n-1,j:i-2},{i:n+1,j:i+2},{i:n-1,j:i+2}])}(e,t,n.color);break;case"K":i=function(e,c,t){var n=c.i,i=c.j;return O(e,t,[{i:n+1,j:i},{i:n-1,j:i},{i:n,j:i+1},{i:n,j:i-1},{i:n-1,j:i-1},{i:n-1,j:i+1},{i:n+1,j:i-1},{i:n+1,j:i+1}])}(e,t,n.color);break;case"Q":i=function(e,c,t){var n=[];return n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:1,j:0},c))),n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:-1,j:0},c))),n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:0,j:1},c))),n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:0,j:-1},c))),n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:-1,j:-1},c))),n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:-1,j:1},c))),n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:1,j:1},c))),O(e,t,n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:1,j:-1},c))))}(e,t,n.color);break;case"B":i=function(e,c,t){var n=[];return n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:-1,j:-1},c))),n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:-1,j:1},c))),n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:1,j:1},c))),O(e,t,n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:1,j:-1},c))))}(e,t,n.color);break;case"R":i=function(e,c,t){var n=[];return n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:1,j:0},c))),n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:-1,j:0},c))),n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:0,j:1},c))),O(e,t,n=[].concat(Object(r.a)(n),Object(r.a)(h(e,{i:0,j:-1},c))))}(e,t,n.color)}return i}function k(e){var c;switch(e.type){case"P":c="pawn";break;case"N":c="knight";break;case"K":c="king";break;case"Q":c="queen";break;case"B":c="bishop";break;case"R":c="rook"}return"/assets/chess/".concat(e.color,"_").concat(c,".svg")}var f=t(10),d=t.n(f),w=t(1);var m=function(e){var c={backgroundColor:(e.pos.i+e.pos.j)%2===0?"#787878":"#2b2b2b"};return Object(w.jsx)("div",{className:d.a.cell,style:c,id:"cell".concat(e.pos.i).concat(e.pos.j),onClick:function(){return e.onSelected({pos:e.pos,piece:e.piece})},children:Object(w.jsx)("div",{className:"".concat(d.a.pieceContainer," ").concat(e.validMove?d.a.validMove:d.a.notValidMove),children:null!==e.piece&&Object(w.jsx)("img",{src:k(e.piece),alt:"piece",className:d.a.piece})})},e.pos.j+e.pos.i*e.n)},P=t(38),_=t.n(P);var x=function(e){function c(c){null===s?null!==c.piece&&c.piece.color===f&&f===e.myColor&&v(o,c).length>0&&(b(c),k(v(o,c))):(h.some((function(e){return e.i===c.pos.i&&e.j===c.pos.j}))&&(l((function(t){var n=t,i=s.pos.j+s.pos.i*t.n,o=c.pos.j+c.pos.i*t.n;return n.cells[o].piece=t.cells[i].piece,n.cells[i].piece=null,e.socket.emit("move",n),n})),c.piece&&"K"===c.piece.type&&(e.socket.emit("won",f),e.socket.close(),e.setWon(f)),d("white"===f?"black":"white")),b(null),k([]))}var t=Object(n.useState)(u(8)),i=Object(a.a)(t,2),o=i[0],l=i[1],j=Object(n.useState)(null),r=Object(a.a)(j,2),s=r[0],b=r[1],p=Object(n.useState)([]),O=Object(a.a)(p,2),h=O[0],k=O[1],f=e.turn,d=e.setTurn;Object(n.useEffect)((function(){e.socket.on("move",(function(c){l(c),d(e.myColor)})),e.socket.on("won",(function(c){e.socket.close(),e.setWon(c)}))}));var P="black"===e.myColor?o.cells.slice().reverse():o.cells;return Object(w.jsx)("div",{className:_.a.board,children:P.map((function(e,t){return Object(w.jsx)(m,{n:o.n,pos:e.pos,piece:e.piece,validMove:h.some((function(c){return c.i===e.pos.i&&c.j===e.pos.j})),onSelected:c},t)}))})};var C=function(){var e=Object(n.useState)("white"),c=Object(a.a)(e,2),t=c[0],i=c[1],o=Object(n.useState)("none"),l=Object(a.a)(o,2),r=l[0],s=l[1],u=Object(n.useState)(null),b=Object(a.a)(u,2),p=b[0],O=b[1],h=Object(n.useState)(null),v=Object(a.a)(h,2),k=v[0],f=v[1],d=Object(n.useState)(null),m=Object(a.a)(d,2),P=m[0],_=m[1];if(null===k){var C=j()("https://chess-io-mp.herokuapp.com/");C.on("found",(function(e){O(e)})),C.on("rival dc",(function(e){_("Rival disconnected"),s(e)})),f(C)}return"none"===r?Object(w.jsx)("div",{children:null!==p?Object(w.jsxs)("div",{children:[Object(w.jsx)(x,{turn:t,setTurn:i,won:r,setWon:s,socket:k,myColor:p}),Object(w.jsxs)("h1",{children:["Turn: ",t," myColor: ",p]})]}):Object(w.jsx)("h1",{children:"Looking for a match..."})}):Object(w.jsxs)("div",{children:[Object(w.jsxs)("h1",{children:[null!==P&&"".concat(P,". "),"You ",r===p?"won":"lost"]}),Object(w.jsx)("button",{onClick:function(){s("none"),k.close(),f(null),O(null),_(null)},children:"Play again"})]})};o.a.render(Object(w.jsx)(C,{}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.a990f629.chunk.js.map