(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{10:function(e,c,t){e.exports={cell:"Cell_cell__gTdPA",piece:"Cell_piece__dk1Hx",pieceContainer:"Cell_pieceContainer__3zyC3",notValidMove:"Cell_notValidMove__zf5S6",validMove:"Cell_validMove__2RTPT"}},38:function(e,c,t){e.exports={board:"Board_board__1Y7VT"}},75:function(e,c,t){"use strict";t.r(c);var n=t(2),i=t(36),o=t.n(i),a=t(8),l=t(37),r=t.n(l),j=t(10),s=t.n(j),b=t(1);var u=function(e){var c={backgroundColor:(e.pos.i+e.pos.j)%2===0?"#787878":"#2b2b2b"},t=e.piece?e.piece.type:"",n=e.piece?{borderColor:"".concat("white"===e.piece.color?"white":"black"),borderWidth:"0.2vmax",borderStyle:"solid",color:"white"===e.piece.color?"white":"black"}:null;return Object(b.jsx)("div",{className:s.a.cell,style:c,id:"cell".concat(e.pos.i).concat(e.pos.j),onClick:function(){return e.onSelected({pos:e.pos,piece:e.piece})},children:Object(b.jsx)("div",{className:"".concat(s.a.pieceContainer," ").concat(e.validMove?s.a.validMove:s.a.notValidMove),children:Object(b.jsx)("span",{className:s.a.piece,style:n,children:t})})},e.pos.j+e.pos.i*e.n)},p=t(38),O=t.n(p),h=t(0);function f(e,c){return{pos:{i:e,j:c},piece:null}}function d(e){for(var c={n:e,cells:[]},t=0;t<e;t++)for(var n=0;n<e;n++)c.cells.push(f(t,n));return function(e){var c=e;return v(c,"R","black",0,0),v(c,"N","black",0,1),v(c,"B","black",0,2),v(c,"Q","black",0,3),v(c,"K","black",0,4),v(c,"B","black",0,5),v(c,"N","black",0,6),v(c,"R","black",0,7),v(c,"P","black",1,0),v(c,"P","black",1,1),v(c,"P","black",1,2),v(c,"P","black",1,3),v(c,"P","black",1,4),v(c,"P","black",1,5),v(c,"P","black",1,6),v(c,"P","black",1,7),v(c,"R","white",7,0),v(c,"N","white",7,1),v(c,"B","white",7,2),v(c,"Q","white",7,3),v(c,"K","white",7,4),v(c,"B","white",7,5),v(c,"N","white",7,6),v(c,"R","white",7,7),v(c,"P","white",6,0),v(c,"P","white",6,1),v(c,"P","white",6,2),v(c,"P","white",6,3),v(c,"P","white",6,4),v(c,"P","white",6,5),v(c,"P","white",6,6),v(c,"P","white",6,7),c}(c)}function v(e,c,t,n,i){e.cells[i+n*e.n].piece={color:t,type:c}}function k(e,c){return c.i>=0&&c.i<e.n&&c.j>=0&&c.j<e.n}function w(e,c,t){return t.filter((function(t){var n=t.j+t.i*e.n;return k(e,t)&&(null===e.cells[n].piece||e.cells[n].piece.color!==c)}))}function m(e,c,t){for(var n=[],i=1,o={i:t.i+c.i,j:t.j+c.j};k(e,o)&&null===e.cells[o.j+o.i*e.n].piece;)n.push(o),i++,o={i:t.i+c.i*i,j:t.j+c.j*i};return n.push(o),n}function P(e,c){var t=c.pos,n=c.piece,i=[];switch(n.type){case"P":i=function(e,c,t){var n=c.i,i=c.j,o="black"===t?1:-1,a="black"===t?1:6,l=[],r={i:n+o,j:i},j={i:n+2*o,j:i};return[{i:n+o,j:i-1},{i:n+o,j:i+1}].forEach((function(c){k(e,c)&&e.cells[c.j+c.i*e.n].piece&&e.cells[c.j+c.i*e.n].piece.color!==t&&l.push(c)})),k(e,r)&&null===e.cells[r.j+r.i*e.n].piece&&(l.push(r),n===a&&k(e,j)&&null===e.cells[j.j+j.i*e.n].piece&&l.push(j)),w(e,t,l)}(e,t,n.color);break;case"N":i=function(e,c,t){var n=c.i,i=c.j;return w(e,t,[{i:n+2,j:i-1},{i:n+2,j:i+1},{i:n-2,j:i-1},{i:n-2,j:i+1},{i:n+1,j:i-2},{i:n-1,j:i-2},{i:n+1,j:i+2},{i:n-1,j:i+2}])}(e,t,n.color);break;case"K":i=function(e,c,t){var n=c.i,i=c.j;return w(e,t,[{i:n+1,j:i},{i:n-1,j:i},{i:n,j:i+1},{i:n,j:i-1},{i:n-1,j:i-1},{i:n-1,j:i+1},{i:n+1,j:i-1},{i:n+1,j:i+1}])}(e,t,n.color);break;case"Q":i=function(e,c,t){var n=[];return n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:1,j:0},c))),n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:-1,j:0},c))),n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:0,j:1},c))),n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:0,j:-1},c))),n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:-1,j:-1},c))),n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:-1,j:1},c))),n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:1,j:1},c))),w(e,t,n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:1,j:-1},c))))}(e,t,n.color);break;case"B":i=function(e,c,t){var n=[];return n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:-1,j:-1},c))),n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:-1,j:1},c))),n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:1,j:1},c))),w(e,t,n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:1,j:-1},c))))}(e,t,n.color);break;case"R":i=function(e,c,t){var n=[];return n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:1,j:0},c))),n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:-1,j:0},c))),n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:0,j:1},c))),w(e,t,n=[].concat(Object(h.a)(n),Object(h.a)(m(e,{i:0,j:-1},c))))}(e,t,n.color)}return i}var x=function(e){function c(c){null===s?null!==c.piece&&c.piece.color===w&&w===e.myColor&&P(o,c).length>0&&(p(c),k(P(o,c))):(v.some((function(e){return e.i===c.pos.i&&e.j===c.pos.j}))&&(l((function(t){var n=t,i=s.pos.j+s.pos.i*t.n,o=c.pos.j+c.pos.i*t.n;return n.cells[o].piece=t.cells[i].piece,n.cells[i].piece=null,e.socket.emit("move",n),n})),c.piece&&"K"===c.piece.type&&(e.socket.emit("won",w),e.setWon(w)),m("white"===w?"black":"white")),p(null),k([]))}var t=Object(n.useState)(d(8)),i=Object(a.a)(t,2),o=i[0],l=i[1],r=Object(n.useState)(null),j=Object(a.a)(r,2),s=j[0],p=j[1],h=Object(n.useState)([]),f=Object(a.a)(h,2),v=f[0],k=f[1],w=e.turn,m=e.setTurn;return Object(n.useEffect)((function(){e.socket.on("move",(function(c){l(c),m(e.myColor)})),e.socket.on("won",(function(c){return e.setWon(c)}))}),[]),Object(b.jsx)("div",{className:O.a.board,children:o.cells.map((function(e,t){return Object(b.jsx)(u,{n:o.n,pos:e.pos,piece:e.piece,validMove:v.some((function(c){return c.i===e.pos.i&&c.j===e.pos.j})),onSelected:c},t)}))})};var _=function(){var e=Object(n.useState)("white"),c=Object(a.a)(e,2),t=c[0],i=c[1],o=Object(n.useState)("none"),l=Object(a.a)(o,2),j=l[0],s=l[1],u=Object(n.useState)(null),p=Object(a.a)(u,2),O=p[0],h=p[1],f=Object(n.useState)(null),d=Object(a.a)(f,2),v=d[0],k=d[1];return Object(n.useEffect)((function(){var e=r()("https://chess-io-mp.herokuapp.com/");e.on("found",(function(e){return h(e)})),k(e)}),[]),"none"===j?Object(b.jsx)("div",{children:null!==O?Object(b.jsxs)("div",{children:[Object(b.jsx)(x,{turn:t,setTurn:i,won:j,setWon:s,socket:v,myColor:O}),Object(b.jsxs)("h1",{children:["Turn: ",t," myColor: ",O]})]}):Object(b.jsx)("h1",{children:"Looking for a match..."})}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:[j," won! you were ",O]}),Object(b.jsx)("button",{onClick:function(){return s("none")},children:"Play again"})]})};o.a.render(Object(b.jsx)(_,{}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.4d47c67a.chunk.js.map