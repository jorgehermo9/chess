{"version":3,"sources":["components/Board/Cells/Cell.module.css","components/Board/Board.module.css","components/Board/Cells/Cell.jsx","components/Board/boardUtils.js","components/Board/Board.jsx","components/App.jsx","index.js"],"names":["module","exports","Cell","props","cellStyle","backgroundColor","pos","i","j","type","piece","pieceStyle","borderColor","color","borderWidth","borderStyle","className","styles","cell","style","id","onClick","onSelected","pieceContainer","validMove","notValidMove","n","createCell","createBoard","board","cells","push","newBoard","setPiece","setupBoard","isValidMove","move","validMoves","moves","filter","target","expand","direction","starting","count","getMoves","facing","startVertical","doublemove","forEach","enemy","pawnMoves","knightMoves","kingMoves","queenMoves","bishopMoves","rookMoves","Board","handleClick","selected","turn","myColor","length","setSelected","setMoves","some","setBoard","prev","selectedCell","targetCell","socket","emit","setWon","setTurn","useState","useEffect","on","who","map","index","App","won","setColor","setSocket","clientSocket","io","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4d47c67a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"Cell_cell__gTdPA\",\"piece\":\"Cell_piece__dk1Hx\",\"pieceContainer\":\"Cell_pieceContainer__3zyC3\",\"notValidMove\":\"Cell_notValidMove__zf5S6\",\"validMove\":\"Cell_validMove__2RTPT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"board\":\"Board_board__1Y7VT\"};","import React from \"react\";\nimport Board from \"../Board\";\nimport styles from \"./Cell.module.css\"\n\nfunction Cell(props){\n\tconst white = (props.pos.i+props.pos.j) % 2 === 0;\n\tconst cellStyle={\n\t\tbackgroundColor: white?\"#787878\":\"#2b2b2b\",\n\t}\n\n\tconst type = props.piece? props.piece.type:\"\";\n\tconst pieceStyle = props.piece?{\n\t\tborderColor: `${props.piece.color===\"white\"?\"white\":\"black\"}`,\n\t\tborderWidth: \"0.2vmax\",\n\t\tborderStyle: \"solid\",\n\t\tcolor: props.piece.color===\"white\"?\"white\":\"black\"}\n\t\t:null\n\treturn(\n\t\t<div \n\t\t\tkey={props.pos.j+props.pos.i*props.n}\n\t\t\tclassName={styles.cell}\n\t\t\tstyle={cellStyle}\n\t\t\tid={`cell${props.pos.i}${props.pos.j}`}\n\t\t\tonClick={\n\t\t\t\t()=>props.onSelected({pos:props.pos,piece:props.piece})}\n\t\t>\n\t\t\t<div className={`${styles.pieceContainer} ${props.validMove?styles.validMove:styles.notValidMove}`}>\n\t\t\t\t<span className={styles.piece} style={pieceStyle}>\n\t\t\t\t\t{type}\n\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t</div>\n\t)\n}\n\n\nexport default Cell;","function createCell(i,j){\n\treturn {pos:{i:i,j:j}\n\t\t\t\t\t,piece: null };\n}\n\nexport function createBoard(n){\n\tconst board={n:n,cells:[]};\n\tfor(let i=0;i<n;i++){\n\t\tfor(let j =0;j<n;j++){\n\t\t\tboard.cells.push(createCell(i,j));\n\t\t}\n\t}\n\tconst settedBoard = setupBoard(board);\n\treturn settedBoard;\n}\nfunction setPiece(board,type,color,i,j){\n\tconst cell= board.cells[j + i*board.n];\n\tcell.piece = {color:color,type:type};\n}\nfunction setupBoard(board){\n\tconst newBoard = board;\n\tsetPiece(newBoard,\"R\",\"black\",0,0);\n\tsetPiece(newBoard,\"N\",\"black\",0,1);\n\tsetPiece(newBoard,\"B\",\"black\",0,2);\n\tsetPiece(newBoard,\"Q\",\"black\",0,3);\n\tsetPiece(newBoard,\"K\",\"black\",0,4);\n\tsetPiece(newBoard,\"B\",\"black\",0,5);\n\tsetPiece(newBoard,\"N\",\"black\",0,6);\n\tsetPiece(newBoard,\"R\",\"black\",0,7);\n\tsetPiece(newBoard,\"P\",\"black\",1,0);\n\tsetPiece(newBoard,\"P\",\"black\",1,1);\n\tsetPiece(newBoard,\"P\",\"black\",1,2);\n\tsetPiece(newBoard,\"P\",\"black\",1,3);\n\tsetPiece(newBoard,\"P\",\"black\",1,4);\n\tsetPiece(newBoard,\"P\",\"black\",1,5);\n\tsetPiece(newBoard,\"P\",\"black\",1,6);\n\tsetPiece(newBoard,\"P\",\"black\",1,7);\t\n\t\n\tsetPiece(newBoard,\"R\",\"white\",7,0);\n\tsetPiece(newBoard,\"N\",\"white\",7,1);\n\tsetPiece(newBoard,\"B\",\"white\",7,2);\n\tsetPiece(newBoard,\"Q\",\"white\",7,3);\n\tsetPiece(newBoard,\"K\",\"white\",7,4);\n\tsetPiece(newBoard,\"B\",\"white\",7,5);\n\tsetPiece(newBoard,\"N\",\"white\",7,6);\n\tsetPiece(newBoard,\"R\",\"white\",7,7);\n\tsetPiece(newBoard,\"P\",\"white\",6,0);\n\tsetPiece(newBoard,\"P\",\"white\",6,1);\n\tsetPiece(newBoard,\"P\",\"white\",6,2);\n\tsetPiece(newBoard,\"P\",\"white\",6,3);\n\tsetPiece(newBoard,\"P\",\"white\",6,4);\n\tsetPiece(newBoard,\"P\",\"white\",6,5);\n\tsetPiece(newBoard,\"P\",\"white\",6,6);\n\tsetPiece(newBoard,\"P\",\"white\",6,7);\n\n\treturn newBoard;\n}\n\nfunction isValidMove(board,move){\n\treturn move.i >=0 && move.i < board.n && move.j >=0 && move.j<board.n;\n}\nfunction validMoves(board,color,moves){\n\treturn moves.filter(move =>{\n\t\tconst target = move.j+move.i*board.n;\n\t\treturn (\n\t\t\tisValidMove(board,move) &&\n\t\t\t(board.cells[target].piece ===null || board.cells[target].piece.color !== color)\n\t\t);\n\t})\n}\nfunction pawnMoves(board,{i,j},color){\n\tconst facing = color === \"black\"?1:-1;\n\tconst startVertical = color===\"black\"?1:6;\n\tconst moves =[];\n\tconst enemies = [{i:i+facing,j:j-1},{i:i+facing,j:j+1}];\n\tlet move = {i:i+facing,j:j};\n\tlet doublemove = {i:i+2*facing,j:j};\n\n\tenemies.forEach( enemy => {\n\t\tif(isValidMove(board,enemy) && \n\t\t(board.cells[enemy.j + enemy.i*board.n].piece&&board.cells[enemy.j + enemy.i*board.n].piece.color!==color )){\n\t\t\tmoves.push(enemy);\n\t\t}\n\t})\n\n\tif(isValidMove(board,move)&&(board.cells[move.j + move.i*board.n].piece===null)){\n\t\t\tmoves.push(move);\n\t\t\tif(i ===startVertical && \n\t\t\t\tisValidMove(board,doublemove)&&(board.cells[doublemove.j + doublemove.i*board.n].piece===null)){\n\t\t\t\tmoves.push(doublemove);\n\t\t\t}\n\t\t}\n\treturn validMoves(board,color,moves);\n}\nfunction knightMoves(board,{i,j},color){\n\tconst moves =[\n\t\t{i:i+2,j:j-1},\n\t\t{i:i+2,j:j+1},\n\t\t{i:i-2,j:j-1},\n\t\t{i:i-2,j:j+1},\n\t\t{i:i+1,j:j-2},\n\t\t{i:i-1,j:j-2},\n\t\t{i:i+1,j:j+2},\n\t\t{i:i-1,j:j+2}\n\t];\n\treturn validMoves(board,color,moves);\n}\nfunction kingMoves(board,{i,j},color){\n\tconst moves = [\n\t\t{i:i+1,j:j},\n\t\t{i:i-1,j:j},\n\t\t{i:i,j:j+1},\n\t\t{i:i,j:j-1},\n\t\t{i:i-1,j:j-1},\n\t\t{i:i-1,j:j+1},\n\t\t{i:i+1,j:j-1},\n\t\t{i:i+1,j:j+1},\n\t];\n\treturn validMoves(board,color,moves);\n}\nfunction expand(board,direction,starting){\n\tlet moves=[];\n\tlet count =1;\n\tlet cell = {i:starting.i + direction.i,j:starting.j+direction.j};\n\twhile(isValidMove(board,cell) && board.cells[cell.j+cell.i*board.n].piece ===null){\n\t\tmoves.push(cell);\n\t\tcount++;\n\t\tcell = {i:starting.i+direction.i*count,j:starting.j+direction.j*count};\n\t}\n\tmoves.push(cell)//Add last cell as target cell\n\treturn moves;\n}\nfunction queenMoves(board,starting,color){\n\tlet moves=[];\n\tmoves = [...moves,...expand(board,{i:1,j:0},starting)];\n\tmoves = [...moves,...expand(board,{i:-1,j:0},starting)];\n\tmoves = [...moves,...expand(board,{i:0,j:1},starting)];\n\tmoves = [...moves,...expand(board,{i:0,j:-1},starting)];\n\n\tmoves = [...moves,...expand(board,{i:-1,j:-1},starting)];\n\tmoves = [...moves,...expand(board,{i:-1,j:1},starting)];\n\tmoves = [...moves,...expand(board,{i:1,j:1},starting)];\n\tmoves = [...moves,...expand(board,{i:1,j:-1},starting)];\n\treturn validMoves(board,color,moves);\n}\nfunction bishopMoves(board,starting,color){\n\tlet moves = [];\n\n\tmoves = [...moves,...expand(board,{i:-1,j:-1},starting)];\n\tmoves = [...moves,...expand(board,{i:-1,j:1},starting)];\n\tmoves = [...moves,...expand(board,{i:1,j:1},starting)];\n\tmoves = [...moves,...expand(board,{i:1,j:-1},starting)];\n\treturn validMoves(board,color,moves);\n}\n\nfunction rookMoves(board,starting,color){\n\tlet moves =[];\n\tmoves = [...moves,...expand(board,{i:1,j:0},starting)];\n\tmoves = [...moves,...expand(board,{i:-1,j:0},starting)];\n\tmoves = [...moves,...expand(board,{i:0,j:1},starting)];\n\tmoves = [...moves,...expand(board,{i:0,j:-1},starting)];\n\treturn validMoves(board,color,moves);\n}\nexport function getMoves(board,{pos,piece}){\n\tlet moves= [];\n\tswitch (piece.type) {\n\t\tcase \"P\":\n\t\t\tmoves = pawnMoves(board,pos,piece.color);\n\t\t\tbreak;\n\t\tcase \"N\":\n\t\t\tmoves = knightMoves(board,pos,piece.color);\n\t\t\tbreak;\n\t\tcase \"K\":\n\t\t\tmoves = kingMoves(board,pos,piece.color);\n\t\t\tbreak;\n\t\tcase \"Q\":\n\t\t\tmoves = queenMoves(board,pos,piece.color);\n\t\t\tbreak;\n\t\tcase \"B\":\n\t\t\tmoves = bishopMoves(board,pos,piece.color);\n\t\t\tbreak;\n\t\tcase \"R\":\n\t\t\tmoves = rookMoves(board,pos,piece.color);\n\t\t\tbreak;\n\t\t\t\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\treturn moves;\n}\n\n\n","import React, { useEffect, useState } from \"react\";\nimport Cell from \"./Cells/Cell\";\nimport styles from \"./Board.module.css\"\nimport {createBoard,getMoves} from \"./boardUtils\"\n\n\nfunction Board(props){\n\tfunction inverse(color){\n\t\treturn color ===\"white\"?\"black\":\"white\";\n\t}\n\tfunction handleClick(target){\n\n\t\tif(selected === null){\n\t\t\tif(target.piece !==null && target.piece.color === turn && turn ===props.myColor){\n\t\t\t\tconst moves = getMoves(board,target);\n\t\t\t\tif(moves.length >0){\n\t\t\t\t\tsetSelected(target);\n\t\t\t\t\tsetMoves(getMoves(board,target));\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(validMoves.some(move => move.i === target.pos.i && move.j === target.pos.j)){\n\n\t\t\t\tsetBoard(prev =>{\n\t\t\t\t\tconst newBoard = prev;\n\t\t\t\t\tconst selectedCell = selected.pos.j+selected.pos.i*prev.n;\n\t\t\t\t\tconst targetCell = target.pos.j+target.pos.i*prev.n;\n\t\t\t\t\tnewBoard.cells[targetCell].piece = prev.cells[selectedCell].piece;\n\t\t\t\t\tnewBoard.cells[selectedCell].piece = null;\n\t\t\t\t\tprops.socket.emit(\"move\",newBoard);\n\t\t\t\t\treturn newBoard;\n\t\t\t\t});\n\t\t\t\tif(target.piece && target.piece.type===\"K\"){\n\t\t\t\t\tprops.socket.emit(\"won\",turn)\n\t\t\t\t\tprops.setWon(turn);\n\t\t\t\t}\n\t\t\t\tsetTurn(inverse(turn));\n\t\t\t}\n\t\t\tsetSelected(null);\n\t\t\tsetMoves([]);\n\t\t}\n\t}\n\tconst n =8;\n\tconst [board,setBoard] = useState(createBoard(n));\n\tconst [selected,setSelected] = useState(null);\n\tconst [validMoves,setMoves] = useState([]);\n\tconst turn =props.turn;\n\tconst setTurn = props.setTurn;\n\n\tuseEffect(()=>{\n\t\tprops.socket.on(\"move\", board => {\n\t\t\tsetBoard(board);\n\t\t\tsetTurn(props.myColor);\n\t\t})\n\t\tprops.socket.on(\"won\", who => props.setWon(who));\n\t},[])\n\n\treturn (\n\t\t<div className={styles.board}>\n\t\t\t{board.cells.map((cell,index) =>\n\t\t\t<Cell \n\t\t\tkey ={index}\n\t\t\tn={board.n}\n\t\t\tpos={cell.pos} \n\t\t\tpiece={cell.piece}\n\t\t\tvalidMove={validMoves.some((move) => \n\t\t\t\t\t\t\t\tmove.i === cell.pos.i && move.j===cell.pos.j )}\n\t\t\tonSelected={handleClick}\n\t\t\t/>)}\n\t\t</div>\n\t)\n}\n\n\nexport default Board;","import React,{useState,useEffect} from \"react\";\nimport io from \"socket.io-client\"\nimport Board from \"./Board/Board\"\n\n\nfunction App(){\n\tconst [turn,setTurn] = useState(\"white\");\n\tconst [won,setWon] = useState(\"none\");\n\tconst [myColor,setColor] = useState(null);\n\tconst [socket,setSocket] = useState(null);\n\tuseEffect(()=>{\t\n\t\tconst clientSocket =io(\"https://chess-io-mp.herokuapp.com/\");\n\t\tclientSocket.on(\"found\",color => setColor(color));\n\t\tsetSocket(clientSocket);\n\t},[])\n\treturn(\n\t\twon===\"none\"?\n\t\t\t<div>\n\t\t\t\t{myColor!==null?\n\t\t\t\t<div>\n\t\t\t\t\t<Board \n\t\t\t\t\t\tturn={turn} setTurn={setTurn}\n\t\t\t\t\t\twon ={won} setWon={setWon}\n\t\t\t\t\t\tsocket={socket}\n\t\t\t\t\t\tmyColor={myColor}\n\t\t\t\t\t\t/>\n\t\t\t\t\t<h1>Turn: {turn} myColor: {myColor}</h1>\n\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t<h1>Looking for a match...</h1>\n\t\t\t}\n\t\t\t</div>\n\t\t\t:\n\t\t\t<div>\n\t\t\t\t\t<h1>{won} won! you were {myColor}</h1>\n\t\t\t\t\t<button onClick={()=> setWon(\"none\")}>Play again</button>\n\t\t\t</div>\n\t);\n}\n\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\"\n\nReactDOM.render(<App/>,document.getElementById(\"root\"));"],"sourceRoot":""}